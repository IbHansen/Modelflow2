<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to ModelFlow’s documentation! &mdash; ModelFlow  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="#" class="icon icon-home"> ModelFlow
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Core.html">Core Modules, creates and solves model instances</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">ModelFlow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to ModelFlow’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="welcome-to-modelflow-s-documentation">
<h1>Welcome to ModelFlow’s documentation!<a class="headerlink" href="#welcome-to-modelflow-s-documentation" title="Permalink to this headline"></a></h1>
<p>Dette er en prøve
og en ande kllgg</p>
<p>ddddd</p>
<p>ddddd</p>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Core.html">Core Modules, creates and solves model instances</a></li>
</ul>
</div>
</div>
<div class="section" id="processing-model-specification">
<h1>Processing model specification<a class="headerlink" href="#processing-model-specification" title="Permalink to this headline"></a></h1>
<p>The purpose is to process models specified in different ways
- Macro business language
- Eviews
- Excel
- Latex</p>
<p>and make them into the modelflows business Logic language.</p>
<div class="section" id="module-modelmanipulation">
<span id="modelmanipulation-text-processing-of-of-models-before-they-become-model-class-instances"></span><h2>Modelmanipulation, Text processing of of models before they become model class instances<a class="headerlink" href="#module-modelmanipulation" title="Permalink to this headline"></a></h2>
<p>Created on Mon Sep 02 19:41:11 2013</p>
<p>This module is a textprocessing module which is used to transforms a <em>template model</em> for a generic bank into into a unrolled and
expande model which covers all banks - under  control of a list feature.</p>
<p>The resulting model can be solved after beeing proccesed in the <em>modelclass</em> module.</p>
<p>In addition to creating a model for forecasting, the module can also create a model which calculates residulas and and variables
in historic periods.  This model can also be solved by the <em>modelclass</em> module.</p>
<p>&#64;author: Ib</p>
<dl class="py class">
<dt class="sig sig-object py" id="modelmanipulation.safesub">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">safesub</span></span><a class="reference internal" href="_modules/modelmanipulation.html#safesub"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.safesub" title="Permalink to this definition"></a></dt>
<dd><p>A subclass of dict.
if a <em>safesub</em> is indexed by a nonexisting keyword it just return the keyword
this alows missing keywords when substitution text inspired by Python cookbook</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.sub">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">sub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">katalog</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#sub"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.sub" title="Permalink to this definition"></a></dt>
<dd><p>Substitutes keywords from dictionary by returning
text.format_map(safesub(katalog))
Allows missing keywords by using safesub subclass</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.oldsub_frml">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">oldsub_frml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ibdic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#oldsub_frml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.oldsub_frml" title="Permalink to this definition"></a></dt>
<dd><p>to repeat substitution from list</p>
<ul class="simple">
<li><p><em>plus</em> is a seperator, used for creating sums</p></li>
<li><p><em>var</em> and <em>lig</em> Determins for which items the substitution should take place
by var=abe, lig=’ko’ substitution is only performed for entries where var==’ko’</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.sub_frml">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">sub_frml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ibdic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#sub_frml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.sub_frml" title="Permalink to this definition"></a></dt>
<dd><p>to repeat substitution from list</p>
<ul class="simple">
<li><p><em>plus</em> is a seperator, used for creating sums</p></li>
<li><p><em>xvar</em> and <em>lig</em> Determins for which items the substitution should take place
by var=abe, lig=’ko’ substitution is only performed for entries where var==’ko’</p></li>
<li><p><em>xvar</em> is the variable to chek against selected in list</p></li>
<li><p><em>select list</em> is a list of elements in the xvar list to be included</p></li>
<li><p><em>matc</em> is the entry in <em>select list</em> from which to select from xvar</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.find_res">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">find_res</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#find_res"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.find_res" title="Permalink to this definition"></a></dt>
<dd><p>Finds the expression which calculates the residual in a formel. FRML &lt;res=a,endo=b&gt; x=a*b+c $</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.find_res_dynare">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">find_res_dynare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#find_res_dynare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.find_res_dynare" title="Permalink to this definition"></a></dt>
<dd><p>equations to calculat _res formulas
FRML &lt;&gt; x=a*b+c +x_RES  $ -&gt; FRML &lt;&gt; x_res =x-a*b+c  $</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.find_res_dynare_new">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">find_res_dynare_new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#find_res_dynare_new"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.find_res_dynare_new" title="Permalink to this definition"></a></dt>
<dd><p>equations to calculat _res formulas
FRML &lt;&gt; x=a*b+c +x_RES  $ -&gt; FRML &lt;&gt; x_res =x-a*b+c  $
not finished to speed time up</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.find_hist_model">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">find_hist_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#find_hist_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.find_hist_model" title="Permalink to this definition"></a></dt>
<dd><p>takes a unrolled model and create a model which can be run for historic periode</p>
<p>and the identities are also calculeted</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.exounroll">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">exounroll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#exounroll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.exounroll" title="Permalink to this definition"></a></dt>
<dd><p>takes a model and makes a new model by enhancing frml’s with &lt;exo=,j=,jr=&gt;
in their frml name.</p>
<dl class="field-list simple">
<dt class="field-odd">Exo</dt>
<dd class="field-odd"><p>the value can be fixed in to a value valuename_x by setting valuename_d=1</p>
</dd>
<dt class="field-even">Jled</dt>
<dd class="field-even"><p>a additiv adjustment element is added to the frml</p>
</dd>
<dt class="field-odd">Jrled</dt>
<dd class="field-odd"><p>a multiplicativ adjustment element is added to the frml</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.tofrml">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">tofrml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expressions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#tofrml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.tofrml" title="Permalink to this definition"></a></dt>
<dd><p>a function, wich adds FRML to all expressions seperated by &lt;sep&gt;
if no start is specified the max lag will be used</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.dounloop">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">dounloop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#dounloop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.dounloop" title="Permalink to this definition"></a></dt>
<dd><p>Expands (unrolls  do loops in a model template
goes trough a model template until there is no more nested do loops</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.find_arg">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">find_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streng</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#find_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.find_arg" title="Permalink to this definition"></a></dt>
<dd><p>chops a string in 3 parts</p>
<ol class="arabic simple">
<li><p>before ‘funk(‘</p></li>
<li><p>in the matching parantesis</p></li>
<li><p>after the last matching parenthesis</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.sumunroll_old">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">sumunroll_old</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#sumunroll_old"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.sumunroll_old" title="Permalink to this definition"></a></dt>
<dd><p>expands all sum(list,’expression’) in a model
returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.lagarray_unroll">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">lagarray_unroll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#lagarray_unroll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.lagarray_unroll" title="Permalink to this definition"></a></dt>
<dd><p>expands all sum(list,’expression’) in a model
returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.sumunroll">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">sumunroll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#sumunroll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.sumunroll" title="Permalink to this definition"></a></dt>
<dd><p>expands all sum(list,’expression’) in a model
if sum(list xvar=lig,’expression’) only list elements where the condition is
satisfied wil be summed</p>
<p>returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.argunroll">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">argunroll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#argunroll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.argunroll" title="Permalink to this definition"></a></dt>
<dd><p>expands all ARGEXPAND(list,’expression’) in a model
returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.creatematrix">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">creatematrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#creatematrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.creatematrix" title="Permalink to this definition"></a></dt>
<dd><p>expands all ARGEXPAND(list,’expression’) in a model
returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.createarray">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">createarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#createarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.createarray" title="Permalink to this definition"></a></dt>
<dd><p>expands all to_array(list) in a model
returns a new model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.kaedeunroll">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">kaedeunroll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#kaedeunroll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.kaedeunroll" title="Permalink to this definition"></a></dt>
<dd><p>unrolls a chain (kaede) expression - used in the SMEC moedel</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.check_syntax_frml">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">check_syntax_frml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frml</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#check_syntax_frml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.check_syntax_frml" title="Permalink to this definition"></a></dt>
<dd><p>check syntax of frml</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.normalize_a_frml">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">normalize_a_frml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frml</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#normalize_a_frml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.normalize_a_frml" title="Permalink to this definition"></a></dt>
<dd><p>Normalize and show a frml</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.nomalize_a_model">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">nomalize_a_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">equations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#nomalize_a_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.nomalize_a_model" title="Permalink to this definition"></a></dt>
<dd><p>a symbolic normalization is performed if there is a syntaxerror</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.normalize">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">normalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sym</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.normalize" title="Permalink to this definition"></a></dt>
<dd><p>Normalize an equation with log or several variables at the left hand side, the first variable is considerd the endogeneeus</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.explode">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">explode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sym</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#explode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.explode" title="Permalink to this definition"></a></dt>
<dd><p>prepares a model from a model template.</p>
<p>Returns a expanded model which is ready to solve</p>
<p>Eksempel: model = udrul_model(MinModel.txt)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.modelprint">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">modelprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">A</span> <span class="pre">model'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">udfil</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">short</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#modelprint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.modelprint" title="Permalink to this definition"></a></dt>
<dd><p>prettyprinter for a a model.
:udfil: if present is output file
:short: if present condences the model
Can handle both model templates and models</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.lagone">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">lagone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">laglead</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#lagone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.lagone" title="Permalink to this definition"></a></dt>
<dd><p>All variables in a string i
s lagged one more time</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.lag_n_tup">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">lag_n_tup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">udtryk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#lag_n_tup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.lag_n_tup" title="Permalink to this definition"></a></dt>
<dd><p>return a tuppel og lagged expressions from lag = 0 to lag = n)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.pastestring">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">pastestring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onlylags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#pastestring"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.pastestring" title="Permalink to this definition"></a></dt>
<dd><p>All variable names in a  in a string <strong>ind</strong> is pasted with the string <strong>post</strong></p>
<p>This function can be used to awoid variable name conflict with the internal variable names in sympy.</p>
<p>an advanced function</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.stripstring">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">stripstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#stripstring"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.stripstring" title="Permalink to this definition"></a></dt>
<dd><p>All variable names in a  in a string is <strong>ind</strong> is stripped of the string <strong>post</strong>.</p>
<p>This function reverses the pastestring process</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.findindex">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">findindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind00</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#findindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.findindex" title="Permalink to this definition"></a></dt>
<dd><p>find the index variables meaning variables on the left hand side of = braced by {}</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.doablelist">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">doablelist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expressions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\n'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#doablelist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.doablelist" title="Permalink to this definition"></a></dt>
<dd><p>create a list of tupels from expressions seperated by sep,
each element in the list is a tupel (index, number og expression, the expression)</p>
<p>we want make group the expressions acording to index
index is elements on the left of = braced by {}</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.doablekeep">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">doablekeep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formulars</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#doablekeep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.doablekeep" title="Permalink to this definition"></a></dt>
<dd><p>takes index in the lhs and creates a do loop around the lines with same indexes
on the right side you can use %0_, %1_ an so on to indicate the index, just to awoid typing to much</p>
<p>Also %i_ will be changed to all the indexes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.doable">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">doable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formulars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#doable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.doable" title="Permalink to this definition"></a></dt>
<dd><p>takes index in the lhs and creates a do loop around the line
on the right side you can use %0_, %1_ an so on to indicate the index, just to awoid typing to much</p>
<p>Also %i_ will be changed to all the indexes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.findindex_gams">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">findindex_gams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind00</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#findindex_gams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.findindex_gams" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><ul class="simple">
<li><p>an equation looks like this</p></li>
<li><p>&lt;frmlname&gt; [index] lhs = rhs</p></li>
</ul>
</div></blockquote>
<p>this function find frmlname and index variables on the left hand side. meaning variables braced by {}</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.un_normalize_expression">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">un_normalize_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frml</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#un_normalize_expression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.un_normalize_expression" title="Permalink to this definition"></a></dt>
<dd><p>This function makes sure that all formulas are unnormalized.
if the formula is already decorated with &lt;endo=name&gt; this is kept
else the lhs_varriable is used in &lt;endo=&gt;</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.un_normalize_model">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">un_normalize_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#un_normalize_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.un_normalize_model" title="Permalink to this definition"></a></dt>
<dd><p>un normalize a model</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.un_normalize_simpel">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">un_normalize_simpel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_equations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#un_normalize_simpel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.un_normalize_simpel" title="Permalink to this definition"></a></dt>
<dd><p>un-normalize expressions delimeted by linebreaks</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelmanipulation.eksempel">
<span class="sig-prename descclassname"><span class="pre">modelmanipulation.</span></span><span class="sig-name descname"><span class="pre">eksempel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmanipulation.html#eksempel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmanipulation.eksempel" title="Permalink to this definition"></a></dt>
<dd><p>takes a template model as input, creates a model and a histmodel and prints the models</p>
</dd></dl>

</div>
<div class="section" id="module-modelnormalize">
<span id="modelnormalize-transforms-and-normalizes-single-equations"></span><h2>Modelnormalize, Transforms and normalizes single equations<a class="headerlink" href="#module-modelnormalize" title="Permalink to this headline"></a></h2>
<p>Created on Sat Nov 28 13:32:47 2020</p>
<p>This Module is used transforming model specifications to modelflow business language.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>preprocessing expressions to resolve functions like</dt><dd><p>dlog, log, pct, movavg</p>
</dd>
</dl>
</li>
<li><p>replace function names</p></li>
<li><p>normalize formulas</p></li>
</ul>
</div></blockquote>
<p>&#64;author: bruger</p>
<dl class="py class">
<dt class="sig sig-object py" id="modelnormalize.Normalized_frml">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">Normalized_frml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endo_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocessed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_add_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">un_normalized</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitted</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eviews</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#Normalized_frml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.Normalized_frml" title="Permalink to this definition"></a></dt>
<dd><p>class defining result from normalization of expression</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.endovar">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">endovar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#endovar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.endovar" title="Permalink to this definition"></a></dt>
<dd><p>Finds the first variable in a expression</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.funk_in">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">funk_in</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#funk_in"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.funk_in" title="Permalink to this definition"></a></dt>
<dd><p>Find the first location of a function in a string</p>
<p>if found returns a match object where the group 2 is the interesting stuff used in funk_find_arg</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.funk_replace">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">funk_replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funk1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funk2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#funk_replace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.funk_replace" title="Permalink to this definition"></a></dt>
<dd><p>replace funk1( with funk2(</p>
<p>takes care that funk1 embedded in variable name is not replaced</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.funk_replace_list">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">funk_replace_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replacelist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_string</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#funk_replace_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.funk_replace_list" title="Permalink to this definition"></a></dt>
<dd><p>Replaces a list of funk1( , funk2(</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.funk_find_arg">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">funk_find_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funk_match</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">streng</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#funk_find_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.funk_find_arg" title="Permalink to this definition"></a></dt>
<dd><p>chops a string in 3 parts</p>
<ol class="arabic simple">
<li><p>before ‘funk(‘</p></li>
<li><p>in the matching parantesis</p></li>
<li><p>after the last matching parenthesis</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.preprocess">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">udtryk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#preprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.preprocess" title="Permalink to this definition"></a></dt>
<dd><p>test processing expanding dlog,diff,movavg,pct,logit functions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>udtryk</strong> (<em>str</em>) – model we want to do template expansion on</p></li>
<li><p><strong>funks</strong> (<em>list</em><em>, </em><em>optional</em>) – list of user defined functions . Defaults to [].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
<p>has to be changed to (= for when the transition to 3.8 is finished.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.normal">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">normal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind_o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">the_endo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_add_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_preprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_A'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endo_lhs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_fixable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_fitted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eviews</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#normal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.normal" title="Permalink to this definition"></a></dt>
<dd><p>normalize an expression g(y,x) = f(y,x) ==&gt; y = F(x,z)</p>
<p>Default find the expression for the first variable on the left hand side (lhs)</p>
<p>The variable - without lags-  should not be on rhs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ind_o</strong> (<em>str</em>) – input expression, no $ and no frml name just lhs=rhs</p></li>
<li><p><strong>the_endo</strong> (<em>str</em><em>, </em><em>optional</em>) – the endogeneous to isolate on the left hans side. if the first variable in the lhs.
It shoud be on the left hand side.</p></li>
<li><p><strong>add_add_factor</strong> (<em>bool</em><em>, </em><em>optional</em>) – force introduction aof adjustment term, and an expression to calculate it</p></li>
<li><p><strong>do_preprocess</strong> (<em>bool</em><em>, </em><em>optional</em>) – DESCRIPTION. preprocess the expression</p></li>
<li><p><strong>endo_lhs</strong> (<em>bool</em><em>, </em><em>optional</em>) – If false, accept to normalize for a rhs endogeneous variable</p></li>
<li><p><strong>make_fixable</strong> (<em>bool</em><em>, </em><em>optional</em>) – also make this equation exogenizable</p></li>
<li><p><strong>fitted</strong> (<em>bool</em><em>,</em><em>optional</em>) – create a fitted equations, without exo and adjustment</p></li>
</ul>
</dd>
</dl>
<p>preprocessing handels</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Normalized_frml which will contain the different relevant expressions</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>An instance of the class</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnormalize.elem_trans">
<span class="sig-prename descclassname"><span class="pre">modelnormalize.</span></span><span class="sig-name descname"><span class="pre">elem_trans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">udtryk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnormalize.html#elem_trans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnormalize.elem_trans" title="Permalink to this definition"></a></dt>
<dd><p>Handeles expression with &#64;elem</p>
</dd></dl>

</div>
<div class="section" id="onboarding-models">
<h2>Onboarding models<a class="headerlink" href="#onboarding-models" title="Permalink to this headline"></a></h2>
<p>Modules to onboard models from different sources.</p>
<p>The process of onboarding involves transforming the original specification
to <strong>Modelflow Business Logic Language</strong> using what ever tools needed. As Python has very
powerfull string and datatools it is possible to onboard many models - but by all means not all models.</p>
<p>Be aware, that the functions presented here are made for specific model(families) following specific conventions. If these
conventions are not followed, another model can’t be onboarded</p>
<div class="section" id="eviews">
<h3>Eviews<a class="headerlink" href="#eviews" title="Permalink to this headline"></a></h3>
<div class="section" id="module-modelgrabwf2">
<span id="from-wf1-file"></span><h4>From wf1 file<a class="headerlink" href="#module-modelgrabwf2" title="Permalink to this headline"></a></h4>
<p>Created on Wed Mar 30 10:06:26 2022</p>
<p>&#64;author: ibhan</p>
<p>Module to handle models in wf1 files</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Eviews is started and the wf1 file is loaded.</p>
<ol class="arabic simple">
<li><p>Some transformations are performed on data.</p></li>
<li><p>The model is unlinked.</p></li>
<li><p>The workspace is saved as a wf2 file. Same name with _modelflow appended.</p></li>
</ol>
</li>
<li><p>Eviews is closed</p></li>
<li><p>The wf2 file is read as a json file.</p></li>
<li><p>Relevant objects are extracted.</p></li>
<li><p>The MFMSA variable is  extracted, to be saved in the dumpfile.</p></li>
<li><p>The equations are transformed and normalized to modelflow format and classified into identities and stochastic</p></li>
<li><p>Stochastic equations are enriched by add_factor and fixing terms (dummy + fixing value)</p></li>
<li><p>For Stochastic equations new fitted variables are generated - without add add_factors and dummies.</p></li>
<li><p>A model to generate fitted variables is created</p></li>
<li><p>A model to generate add_factors is created.</p></li>
<li><p>A model encompassing the original equations, the model for fitted variables and for add_factors is created.</p></li>
<li><p>The data series and scalars are shoveled into a Pandas dataframe</p>
<ol class="arabic simple">
<li><p>Some special series are generated as the expression can not be incorporated into modelflow model specifications</p></li>
<li><p>The model for fitted values is simulated in the specified timespan</p></li>
<li><p>The model for add_factors is simulated in the timespan set in MFMSA</p></li>
</ol>
</li>
<li><p>The data descriptions are extracted into a dictionary.</p></li>
<li><p>Data descriptions for dummies, fixed values, fitted values and add_factors are derived.</p></li>
<li><p>Now we have a model and a dataframe with all variables which are needed.</p></li>
</ol>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="modelgrabwf2.wf1_to_wf2">
<span class="sig-prename descclassname"><span class="pre">modelgrabwf2.</span></span><span class="sig-name descname"><span class="pre">wf1_to_wf2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eviews_run_lines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#wf1_to_wf2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.wf1_to_wf2" title="Permalink to this definition"></a></dt>
<dd><ul class="simple">
<li><p>Opens a eviews workfile in wf1 format</p></li>
<li><p>calculates the eviews_trend</p></li>
<li><p>unlink a model and</p></li>
<li><p>writes the workspace back to a wf2 file</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>modelname</strong> (<em>TYPE</em>) – default ‘’ then the three first letters of the filenames stem are asumed to be the modelname.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelgrabwf2.wf2_to_clean">
<span class="sig-prename descclassname"><span class="pre">modelgrabwf2.</span></span><span class="sig-name descname"><span class="pre">wf2_to_clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wf2name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#wf2_to_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.wf2_to_clean" title="Permalink to this definition"></a></dt>
<dd><p>Takes a eviews .wf2 file - which is in JSON format - and place a
dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wf2name</strong> (<em>TYPE</em>) – name of wf2 file .</p></li>
<li><p><strong>modelname</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – Name og model. Defaults to ‘’.</p></li>
<li><p><strong>save_file</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – save the specification, data and description in a dictionary. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the content of the wf2 file as a dict .</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>model_all_about (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelgrabwf2.</span></span><span class="sig-name descname"><span class="pre">GrabWfModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelname:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eviews_run_lines:</span> <span class="pre">list</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_all_about:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start:</span> <span class="pre">typing.Optional[any]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end:</span> <span class="pre">typing.Optional[any]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_trans:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">GrabWfModel.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country_df_trans:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">GrabWfModel.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_fitted:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_start:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_end:</span> <span class="pre">typing.Optional[any]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_add_factor_calc:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_frml:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disable_progress:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#GrabWfModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.GrabWfModel" title="Permalink to this definition"></a></dt>
<dd><p>This class takes a world bank model specification, variable data and variable description
and transform it to ModelFlow business language</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – any = ‘’  #wf1 name</p></li>
<li><p><strong>modelname</strong> – any = ‘’</p></li>
<li><p><strong>eviews_run_lines</strong> – list =field(default_factory=list)</p></li>
<li><p><strong>model_all_about</strong> – dict = field(default_factory=dict)</p></li>
<li><p><strong>start</strong> – any = None    # start of testing if not overruled by mfmsa</p></li>
<li><p><strong>end</strong> – any = None    # end of testing if not overruled by mfmsa</p></li>
<li><p><strong>country_trans</strong> – any = lambda x:x[:]    # function which transform model specification</p></li>
<li><p><strong>country_df_trans</strong> – any = lambda x:x     # function which transforms initial dataframe</p></li>
<li><p><strong>make_fitted</strong> – bool = False # if True, a clean equation for fittet variables is created</p></li>
<li><p><strong>fit_start</strong> – any = 2000   # start of fittet model</p></li>
<li><p><strong>fit_end</strong> – any = None  # end of fittet model unless overruled by mfmsa</p></li>
<li><p><strong>do_add_factor_calc</strong> – bool = True  # calculate the add factors</p></li>
<li><p><strong>test_frml</strong> – str =’’    # a testmodel as string if used no wf processing</p></li>
<li><p><strong>disable_progress</strong> – bool = False # Disable progress bar</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.__post_init__">
<span class="sig-name descname"><span class="pre">__post_init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#GrabWfModel.__post_init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.GrabWfModel.__post_init__" title="Permalink to this definition"></a></dt>
<dd><p>Process the model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.trans_eviews">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">trans_eviews</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rawmodel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#GrabWfModel.trans_eviews"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.GrabWfModel.trans_eviews" title="Permalink to this definition"></a></dt>
<dd><p>Takes Eviews specifications and wrangle them into modelflow specifications</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rawmodel</strong> (<em>TYPE</em>) – a raw model .</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a model with the appropiate eviews transformations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>rawmodel6 (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.var_description">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">var_description</span></span><a class="headerlink" href="#modelgrabwf2.GrabWfModel.var_description" title="Permalink to this definition"></a></dt>
<dd><p>Adds var descriptions for add factors, exogenizing dummies and exoggenizing values</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.mfmsa_options">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mfmsa_options</span></span><a class="headerlink" href="#modelgrabwf2.GrabWfModel.mfmsa_options" title="Permalink to this definition"></a></dt>
<dd><p>Grab the mfmsa options, a world bank speciality</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.mfmsa_start_end">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mfmsa_start_end</span></span><a class="headerlink" href="#modelgrabwf2.GrabWfModel.mfmsa_start_end" title="Permalink to this definition"></a></dt>
<dd><p>Finds the start and end from the MFMSA entry</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.dfmodel">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dfmodel</span></span><a class="headerlink" href="#modelgrabwf2.GrabWfModel.dfmodel" title="Permalink to this definition"></a></dt>
<dd><p>The original input data enriched with during variablees, variables containing
values for specific historic years and model specific transformation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelgrabwf2.GrabWfModel.test_model">
<span class="sig-name descname"><span class="pre">test_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxerr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showinput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelgrabwf2.html#GrabWfModel.test_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelgrabwf2.GrabWfModel.test_model" title="Permalink to this definition"></a></dt>
<dd><p>Compares a straight calculation with the input dataframe.</p>
<p>shows which variables dont have the same value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>TYPE</em>) – dataframe to run.</p></li>
<li><p><strong>start</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – start period. Defaults to None.</p></li>
<li><p><strong>end</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – end period. Defaults to None.</p></li>
<li><p><strong>maxvar</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – how many variables are to be chekked. Defaults to 1_000_000.</p></li>
<li><p><strong>maxerr</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – how many errors to check Defaults to 100.</p></li>
<li><p><strong>tol</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – check for absolute value of difference. Defaults to 0.0001.</p></li>
<li><p><strong>showall</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – show more . Defaults to False.</p></li>
<li><p><strong>showinput</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – show the input values Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-model_Excel">
<span id="excel"></span><h3>Excel<a class="headerlink" href="#module-model_Excel" title="Permalink to this headline"></a></h3>
<p>Created on Fri Feb 12 07:04:02 2016</p>
<p>&#64;author: ibh</p>
<p>Takes all formula’s  from a excel work book and translates each to the equivalent expression.
Openpyxl is the fastest library but it can not deal all values. Therefor xlwings is also used.
But only to read repeated formula’s which inly will show as ‘=’</p>
<p>Also defines function used when using xlwings to automate excel.</p>
<p>These are used in <a class="reference internal" href="Core.html#modelclass.Excel_Mixin.modeldump_excel" title="modelclass.Excel_Mixin.modeldump_excel"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">modeldump_excel</span></code></a> and <a class="reference internal" href="Core.html#modelclass.Excel_Mixin.modelload_excel" title="modelclass.Excel_Mixin.modelload_excel"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">modelload_excel</span></code></a></p>
<p>Some of the docstring are not very informative, to be improved.</p>
<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.findequations">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">findequations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#findequations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.findequations" title="Permalink to this definition"></a></dt>
<dd><p>Takes all formula’s  from a excel work book and translates each to the equivalent expression.</p>
<blockquote>
<div><p>Multicell ranges are expanded to a comma separated list.</p>
<p>The ordinary operators and the SUM function can be handled. If you need more functions. You have to impelent them in the modelclass.</p>
<p>In the model each cell reference is prefixed by &lt;sheet name&gt;_</p>
<p>Openpyxl is the fastest library and it has a tokenizer
but it can not read all values.</p>
<p>Therefor xlwings is used to read repeated formula’s which Openpyxl will show as ‘=’</p>
</div></blockquote>
<dl>
<dt>input:</dt><dd><dl class="field-list simple">
<dt class="field-odd">name</dt>
<dd class="field-odd"><p>Location of a excel sheeet</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="field-list simple">
<dt class="field-odd">modeldic</dt>
<dd class="field-odd"><p>A dictionary with formulars keyed by cell reference</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.showcells">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">showcells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#showcells"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.showcells" title="Permalink to this definition"></a></dt>
<dd><p>Finds values in a excel workbook with a value different from 0</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.findvalues">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">findvalues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#findvalues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.findvalues" title="Permalink to this definition"></a></dt>
<dd><p>Finds numerical values in a excel workbook with a value different from 0</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.wstrans">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">wstrans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#wstrans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.wstrans" title="Permalink to this definition"></a></dt>
<dd><p>Translates workspace names</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.findcoordinates">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">findcoordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#findcoordinates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.findcoordinates" title="Permalink to this definition"></a></dt>
<dd><p>Finds the cell references matching the codes in a LCR workbook from EBA</p>
<p>This is needed for the mapping of the raw data to the excel cell refereces.</p>
<dl class="simple">
<dt>input:</dt><dd><dl class="field-list simple">
<dt class="field-odd">name</dt>
<dd class="field-odd"><p>Location of a excel sheeet</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>coldf: Dataframe with mapping between excel column and EBA columns_code
:rowdf: Dataframe with row with mapping between excel row and EBS data row_code</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.getexcelmodel">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">getexcelmodel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#getexcelmodel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.getexcelmodel" title="Permalink to this definition"></a></dt>
<dd><p>Creates a model instance from a excel sheet
SUM is replaced by SUM_EXCEL which is a function in the modelclass</p>
<p>In the excel formulars this function accepts ordinary operators and SUM in excel sheets</p>
<dl class="simple">
<dt>input:</dt><dd><dl class="field-list simple">
<dt class="field-odd">name</dt>
<dd class="field-odd"><p>Location of a excel sheeet</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>model: A model instance with the formulars of the excel sheet
:para: A list of values in the sheet which matches exogeneous variables in the model</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.indextrans">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">indextrans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#indextrans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.indextrans" title="Permalink to this definition"></a></dt>
<dd><p>Transforms a period index to excel acceptable datatype</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.df_to_sheet">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">df_to_sheet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#df_to_sheet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.df_to_sheet" title="Permalink to this definition"></a></dt>
<dd><p>Dataframe to sheet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>df</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>wb</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>after</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sht (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.obj_to_sheet">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">obj_to_sheet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#obj_to_sheet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.obj_to_sheet" title="Permalink to this definition"></a></dt>
<dd><p>An python object to sheet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>obj</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>wb</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>after</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.sheet_to_df">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">sheet_to_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#sheet_to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.sheet_to_df" title="Permalink to this definition"></a></dt>
<dd><p>Sheet to df</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wb</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>name</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>df (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_Excel.sheet_to_dict">
<span class="sig-prename descclassname"><span class="pre">model_Excel.</span></span><span class="sig-name descname"><span class="pre">sheet_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_Excel.html#sheet_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_Excel.sheet_to_dict" title="Permalink to this definition"></a></dt>
<dd><p>transform the named sheet to a python dict. If we need a integer it has to be in the integer set</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="processing-results">
<h1>Processing results<a class="headerlink" href="#processing-results" title="Permalink to this headline"></a></h1>
<div class="section" id="module-modelvis">
<span id="modelvis-display-and-vizualize-variables"></span><h2>Modelvis, Display and vizualize variables<a class="headerlink" href="#module-modelvis" title="Permalink to this headline"></a></h2>
<p>Created on Fri May 12 11:07:02 2017</p>
<p>&#64;author: hanseni</p>
<p>This module creates functions and classes for visualizing results.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modelvis.meltdim">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">meltdim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['dima',</span> <span class="pre">'dimb']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Latest'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#meltdim"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.meltdim" title="Permalink to this definition"></a></dt>
<dd><p>Melts a wide dataframe the variable names are split to dimensions acording
to the list of texts in dims. in variablenames
the tall dataframe have a variable name for each dimensions
also values and source are introduced ac column names in the dataframe</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelvis.vis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">vis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis" title="Permalink to this definition"></a></dt>
<dd><p>Visualization class. used as a method on a model instance.</p>
<p>The purpose is to select variables acording to a pattern, potential with wildcards</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.heat">
<span class="sig-name descname"><span class="pre">heat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.heat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.heat" title="Permalink to this definition"></a></dt>
<dd><p>Displays a heatmap of the resulting dataframe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.plot" title="Permalink to this definition"></a></dt>
<dd><p>Displays a plot for each of the columns in the resulting dataframe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.plot_alt">
<span class="sig-name descname"><span class="pre">plot_alt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Title'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.plot_alt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.plot_alt" title="Permalink to this definition"></a></dt>
<dd><p>Displays a plot for each of the columns in the resulting dataframe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.box">
<span class="sig-name descname"><span class="pre">box</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.box"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.box" title="Permalink to this definition"></a></dt>
<dd><p>Displays a boxplot comparing basedf and lastdf</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.violin">
<span class="sig-name descname"><span class="pre">violin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.violin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.violin" title="Permalink to this definition"></a></dt>
<dd><p>Displays a violinplot comparing basedf and lastdf</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.swarm">
<span class="sig-name descname"><span class="pre">swarm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.swarm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.swarm" title="Permalink to this definition"></a></dt>
<dd><p>Displays a swarmlot comparing basedf and lastdf</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.df">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">df</span></span><a class="headerlink" href="#modelvis.vis.df" title="Permalink to this definition"></a></dt>
<dd><p>Returns the result of this instance as a dataframe</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.base">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">base</span></span><a class="headerlink" href="#modelvis.vis.base" title="Permalink to this definition"></a></dt>
<dd><p>Returns basedf</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.pct">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pct</span></span><a class="headerlink" href="#modelvis.vis.pct" title="Permalink to this definition"></a></dt>
<dd><p>Returns the pct change</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.year_pct">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">year_pct</span></span><a class="headerlink" href="#modelvis.vis.year_pct" title="Permalink to this definition"></a></dt>
<dd><p>Returns the pct change over 4 periods (used for quarterly data)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.frml">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">frml</span></span><a class="headerlink" href="#modelvis.vis.frml" title="Permalink to this definition"></a></dt>
<dd><p>Returns formulas</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.des">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">des</span></span><a class="headerlink" href="#modelvis.vis.des" title="Permalink to this definition"></a></dt>
<dd><p>Returns variable descriptions</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.dif">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dif</span></span><a class="headerlink" href="#modelvis.vis.dif" title="Permalink to this definition"></a></dt>
<dd><p>Returns the differens between the basedf and lastdf</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.difpctlevel">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">difpctlevel</span></span><a class="headerlink" href="#modelvis.vis.difpctlevel" title="Permalink to this definition"></a></dt>
<dd><p>Returns the differens between the basedf and lastdf</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.difpct">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">difpct</span></span><a class="headerlink" href="#modelvis.vis.difpct" title="Permalink to this definition"></a></dt>
<dd><p>Returns the differens between the pct changes in basedf and lastdf</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.print">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">print</span></span><a class="headerlink" href="#modelvis.vis.print" title="Permalink to this definition"></a></dt>
<dd><p>prints the current result</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.__repr__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.__repr__" title="Permalink to this definition"></a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis._repr_html_">
<span class="sig-name descname"><span class="pre">_repr_html_</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis._repr_html_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis._repr_html_" title="Permalink to this definition"></a></dt>
<dd><p>Displays a nice summary of the results when called in a Jupyter enviorement</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.rename">
<span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.rename" title="Permalink to this definition"></a></dt>
<dd><p>rename columns</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.vis.mul">
<span class="sig-name descname"><span class="pre">mul</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis.mul"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis.mul" title="Permalink to this definition"></a></dt>
<dd><p>Multiply the curent result with other</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="modelvis.vis.mul100">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mul100</span></span><a class="headerlink" href="#modelvis.vis.mul100" title="Permalink to this definition"></a></dt>
<dd><p>Multiply the current result with 100</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelvis.compvis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">compvis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#compvis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.compvis" title="Permalink to this definition"></a></dt>
<dd><p>Class to compare to runs in boxplots</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelvis.compvis.box">
<span class="sig-name descname"><span class="pre">box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#compvis.box"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.compvis.box" title="Permalink to this definition"></a></dt>
<dd><p>Displays a boxplot</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.compvis.swarm">
<span class="sig-name descname"><span class="pre">swarm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#compvis.swarm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.compvis.swarm" title="Permalink to this definition"></a></dt>
<dd><p>Displays a swarmplot</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.compvis.violin">
<span class="sig-name descname"><span class="pre">violin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#compvis.violin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.compvis.violin" title="Permalink to this definition"></a></dt>
<dd><p>Displays a violinplot</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelvis.container">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lastdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basedf</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#container"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.container" title="Permalink to this definition"></a></dt>
<dd><p>A container, used if to izualize dataframes without a model</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelvis.container.smpl">
<span class="sig-name descname"><span class="pre">smpl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#container.smpl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.container.smpl" title="Permalink to this definition"></a></dt>
<dd><p>Defines the model.current_per which is used for calculation period/index
when no parameters are issues the current current period is returned</p>
<p>Either none or all parameters have to be provided</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.container.vlist">
<span class="sig-name descname"><span class="pre">vlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#container.vlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.container.vlist" title="Permalink to this definition"></a></dt>
<dd><p>returns a list of variable matching the pattern</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelvis.varvis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">varvis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#varvis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.varvis" title="Permalink to this definition"></a></dt>
<dd><p>Visualization class. used as a method on a model instance.</p>
<p>The purpose is to select variables acording to a pattern, potential with wildcards</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelvis.varvis.tracedep">
<span class="sig-name descname"><span class="pre">tracedep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">down</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#varvis.tracedep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.varvis.tracedep" title="Permalink to this definition"></a></dt>
<dd><p>Trace dependensies of name down to level down</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.varvis.tracepre">
<span class="sig-name descname"><span class="pre">tracepre</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">up</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#varvis.tracepre"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.varvis.tracepre" title="Permalink to this definition"></a></dt>
<dd><p>Trace dependensies of name down to level down</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelvis.varvis.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#varvis.__repr__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.varvis.__repr__" title="Permalink to this definition"></a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.vis_alt">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">vis_alt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grund</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mul</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Show</span> <span class="pre">variables'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#vis_alt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.vis_alt" title="Permalink to this definition"></a></dt>
<dd><p>Graph of one of more variables each variable is displayed for 3 banks</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.plotshow">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">plotshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'line'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colrow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sharey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitchar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'__'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savefig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#plotshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.plotshow" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>TYPE</em>) – Dataframe .</p></li>
<li><p><strong>name</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – title. Defaults to ‘’.</p></li>
<li><p><strong>ppos</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – # of position to use if split. Defaults to -1.</p></li>
<li><p><strong>kind</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – matplotlib kind . Defaults to ‘line’.</p></li>
<li><p><strong>colrow</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – columns per row . Defaults to 6.</p></li>
<li><p><strong>sharey</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – Share y axis between plots. Defaults to True.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – relative position of the title. Defaults to 0.90.</p></li>
<li><p><strong>splitchar</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – if the name should be split . Defaults to ‘__’.</p></li>
<li><p><strong>savefig</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – save figure. Defaults to ‘’.</p></li>
<li><p><strong>xsize</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – x size default to 10</p></li>
<li><p><strong>ysize</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – y size per row, defaults to 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a matplotlib fig.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.melt">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">melt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Latest'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#melt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.melt" title="Permalink to this definition"></a></dt>
<dd><p>melts a wide dataframe to a tall dataframe , appends a soruce column</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.heatshow">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">heatshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Reds'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mul</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.69,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#heatshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.heatshow" title="Permalink to this definition"></a></dt>
<dd><p>A heatmap of a dataframe</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.attshow">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">attshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">treshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showsum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(11.69,</span> <span class="pre">8.27)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tshow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'jet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savefig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#attshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.attshow" title="Permalink to this definition"></a></dt>
<dd><p>Shows heatmap of impacts of exogeneous variables
:df: Dataframe with impact
:treshold: Take exogeneous variables with max impact of treshold or larger
:numhigh: take the numhigh largest impacts
:t: transpose the heatmap
:annot: Annotate the heatmap
:head: take the head largest
.tail: take the tail smalest
:showsum: Add a column with the sum
:sort: Sort the data
.tshow: Show a longer title
:cbar:  if a colorbar shoud be displayes
:cmap: the colormap
:save: Save the chart (in png format)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.attshowone">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">attshowone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#attshowone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.attshowone" title="Permalink to this definition"></a></dt>
<dd><p>shows the contribution to row=name from each column
the coulumns can optional be selected as starting with pre</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelvis.water">
<span class="sig-prename descclassname"><span class="pre">modelvis.</span></span><span class="sig-name descname"><span class="pre">water</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serxinput</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allsort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelvis.html#water"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelvis.water" title="Permalink to this definition"></a></dt>
<dd><p>Creates a dataframe with information for a watrfall diagram</p>
<dl class="field-list simple">
<dt class="field-odd">Serx</dt>
<dd class="field-odd"><p>the input serie of values</p>
</dd>
<dt class="field-even">Sort</dt>
<dd class="field-even"><p>True if the bars except the first and last should be sorted (default = False)</p>
</dd>
<dt class="field-odd">Allsort</dt>
<dd class="field-odd"><p>True if all bars should be sorted (default = False)</p>
</dd>
<dt class="field-even">Autosum</dt>
<dd class="field-even"><p>True if a Total bar are added in the end</p>
</dd>
<dt class="field-odd">Ascending</dt>
<dd class="field-odd"><p>True if sortorder = ascending</p>
</dd>
</dl>
<p>Returns a dataframe with theese columns:</p>
<dl class="field-list simple">
<dt class="field-odd">Hbegin</dt>
<dd class="field-odd"><p>Height of the first bar</p>
</dd>
<dt class="field-even">Hend</dt>
<dd class="field-even"><p>Height of the last bar</p>
</dd>
<dt class="field-odd">Hpos</dt>
<dd class="field-odd"><p>Height of positive bars</p>
</dd>
<dt class="field-even">Hneg</dt>
<dd class="field-even"><p>Height of negative bars</p>
</dd>
<dt class="field-odd">Start</dt>
<dd class="field-odd"><p>Ofset at which each bar starts</p>
</dd>
<dt class="field-even">Height</dt>
<dd class="field-even"><p>Height of each bar (just for information)</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="attribution">
<h1>Attribution<a class="headerlink" href="#attribution" title="Permalink to this headline"></a></h1>
<div class="section" id="equation-level">
<h2>Equation level<a class="headerlink" href="#equation-level" title="Permalink to this headline"></a></h2>
<p>Attribution can be performed on the equation level and on the model level</p>
<p>Equation level attribution is done in the modelclass module here  <a class="reference internal" href="Core.html#modelclass.Dekomp_Mixin" title="modelclass.Dekomp_Mixin"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Dekomp_Mixin</span></code></a></p>
<p>The class <a class="reference internal" href="Core.html#modelclass.Dekomp_Mixin" title="modelclass.Dekomp_Mixin"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Dekomp_Mixin</span></code></a> also defines a a number of front end functions both for equation and model attribution</p>
</div>
<div class="section" id="module-modeldekom">
<span id="model-level"></span><h2>Model level<a class="headerlink" href="#module-modeldekom" title="Permalink to this headline"></a></h2>
<p>Module for making attribution analysis of a model.</p>
<p>The main function is attribution</p>
<p>Created on Wed May 31 08:50:51 2017</p>
<p>&#64;author: hanseni</p>
<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.attribution">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">attribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxexp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summaryvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['*']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msilent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#attribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.attribution" title="Permalink to this definition"></a></dt>
<dd><p>Calculates an attribution analysis on a model
accepts a dictionary with experiments. the key is experiment name, the value is a list
of variables which has to be reset to the values in the baseline dataframe.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.attribution_new">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">attribution_new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxexp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summaryvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['*']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msilent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#attribution_new"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.attribution_new" title="Permalink to this definition"></a></dt>
<dd><p>Calculates an attribution analysis on a model
accepts a dictionary with experiments. the key is experiment name, the value is a list
of variables which has to be reset to the values in the baseline dataframe.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.ilist">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">ilist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#ilist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.ilist" title="Permalink to this definition"></a></dt>
<dd><p>returns a list of variable in the model matching the pattern,
the pattern can be a list of patterns of a sting with patterns seperated by
blanks</p>
<p>This function operates on the index names of a dataframe. Relevant for attribution analysis</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.GetSumImpact">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">GetSumImpact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">impact</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PD__*'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#GetSumImpact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.GetSumImpact" title="Permalink to this definition"></a></dt>
<dd><p>Gets the accumulated differences attributet to each impact group</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.GetLastImpact">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">GetLastImpact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">impact</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RCET1__*'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#GetLastImpact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.GetLastImpact" title="Permalink to this definition"></a></dt>
<dd><p>Gets the last differences attributet to each impact group</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.GetAllImpact">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">GetAllImpact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">impact</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RCET1__*'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#GetAllImpact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.GetAllImpact" title="Permalink to this definition"></a></dt>
<dd><p>Gets the last differences attributet to each impact group</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.GetOneImpact">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">GetOneImpact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">impact</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RCET1__*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#GetOneImpact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.GetOneImpact" title="Permalink to this definition"></a></dt>
<dd><p>Gets differences attributet to each impact group in period:per</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modeldekom.AggImpact">
<span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">AggImpact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">impact</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#AggImpact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.AggImpact" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the sum of impacts and place in the last column</p>
<p>This function is applied to the result iof a Get* function</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modeldekom.totdif">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modeldekom.</span></span><span class="sig-name descname"><span class="pre">totdif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summaryvar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">desdic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif" title="Permalink to this definition"></a></dt>
<dd><p>Class to make modelvide attribution analysis</p>
<dl class="py method">
<dt class="sig sig-object py" id="modeldekom.totdif.explain_last">
<span class="sig-name descname"><span class="pre">explain_last</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif.explain_last"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif.explain_last" title="Permalink to this definition"></a></dt>
<dd><p>Explains last period</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pat</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.9.</p></li>
<li><p><strong>title</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>use</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘level’.</p></li>
<li><p><strong>threshold</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>fig (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modeldekom.totdif.explain_sum">
<span class="sig-name descname"><span class="pre">explain_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif.explain_sum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif.explain_sum" title="Permalink to this definition"></a></dt>
<dd><p>Explains the sum</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pat</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.9.</p></li>
<li><p><strong>title</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>use</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘level’.</p></li>
<li><p><strong>threshold</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>fig (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modeldekom.totdif.explain_per">
<span class="sig-name descname"><span class="pre">explain_per</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif.explain_per"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif.explain_per" title="Permalink to this definition"></a></dt>
<dd><p>Explains a periode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pat</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>per</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.9.</p></li>
<li><p><strong>title</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>use</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘level’.</p></li>
<li><p><strong>threshold</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.0.</p></li>
<li><p><strong>ysize</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 5.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>fig (TYPE)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modeldekom.totdif.explain_all">
<span class="sig-name descname"><span class="pre">explain_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axvline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif.explain_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif.explain_all" title="Permalink to this definition"></a></dt>
<dd><p>Explains all</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pat</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>stacked</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to True.</p></li>
<li><p><strong>kind</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘bar’.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.9.</p></li>
<li><p><strong>title</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>use</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘level’.</p></li>
<li><p><strong>threshold</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.0.</p></li>
<li><p><strong>resample</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>axvline</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modeldekom.totdif.totexplain">
<span class="sig-name descname"><span class="pre">totexplain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'level'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ysize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeldekom.html#totdif.totexplain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeldekom.totdif.totexplain" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Wrapper for different explanations</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#modeldekom.totdif.explain_last" title="modeldekom.totdif.explain_last"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">explain_last</span></code></a></p></li>
<li><p><a class="reference internal" href="#modeldekom.totdif.explain_per" title="modeldekom.totdif.explain_per"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">explain_per</span></code></a></p></li>
<li><p><a class="reference internal" href="#modeldekom.totdif.explain_sum" title="modeldekom.totdif.explain_sum"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">explain_sum</span></code></a></p></li>
<li><p><a class="reference internal" href="#modeldekom.totdif.explain_all" title="modeldekom.totdif.explain_all"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">explain_all</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pat</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘*’.</p></li>
<li><p><strong>vtype</strong> (<em>per</em><em>|</em><em>all</em><em>|</em><em>last</em><em>|</em><em>sum</em><em>, </em><em>optional</em>) – what data to attribute. Defaults to ‘all’.</p></li>
<li><p><strong>stacked</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to True.</p></li>
<li><p><strong>kind</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘bar’.</p></li>
<li><p><strong>per</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>top</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.9.</p></li>
<li><p><strong>title</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>use</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘level’.</p></li>
<li><p><strong>threshold</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 0.0.</p></li>
<li><p><strong>ysize</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to 10.</p></li>
<li><p><strong>**kwargs</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DESCRIPTION.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>fig (TYPE)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="targets-and-instruments">
<h1>Targets and instruments<a class="headerlink" href="#targets-and-instruments" title="Permalink to this headline"></a></h1>
<p>Used from the model class here  <a class="reference internal" href="Core.html#modelclass.Solver_Mixin.invert" title="modelclass.Solver_Mixin.invert"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">invert</span></code></a></p>
<span class="target" id="module-modelinvert"></span><p>Created on Thu Sep 21 12:41:10 2017</p>
<p>&#64;author: IBH</p>
<blockquote>
<div><p>Class to handle general target/instrument problems.</p>
<p>Number of targets should be equal to number of instruments</p>
<p>An instrument can comprice of severeral variables
instruments are inputtet as a list of instruments</p>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="modelinvert.targets_instruments">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelinvert.</span></span><span class="sig-name descname"><span class="pre">targets_instruments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">databank</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instruments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DefaultImpuls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaultconv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonlin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solveopt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varimpulse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelinvert.html#targets_instruments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelinvert.targets_instruments" title="Permalink to this definition"></a></dt>
<dd><p>Class to handle general target/instrument problems.
Where the response is delayed specify this with delay.</p>
<p>Number of targets should be equal to number of instruments</p>
<p>An instrument can comprice of severeral variables</p>
<p><strong>Instruments</strong> are inputtet as a list of instruments</p>
<p>To calculate the jacobian each instrument variable has a impuls,
which is used as delta when evaluating the jacobi matrix:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="s1">&#39;QO_J&#39;</span><span class="p">,</span><span class="s1">&#39;TG&#39;</span><span class="p">]</span>   <span class="n">Simple</span> <span class="nb">list</span> <span class="n">each</span> <span class="n">variable</span> <span class="n">are</span> <span class="n">shocked</span> <span class="n">by</span> <span class="n">the</span> <span class="n">default</span> <span class="n">impulse</span>
<span class="p">[</span> <span class="p">(</span><span class="s1">&#39;QO_J&#39;</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span> <span class="s1">&#39;TG&#39;</span><span class="p">]</span>  <span class="n">Here</span> <span class="n">QO_J</span> <span class="ow">is</span> <span class="n">getting</span> <span class="n">its</span> <span class="n">own</span> <span class="n">impuls</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="p">[</span> <span class="p">[(</span><span class="s1">&#39;QO_J&#39;</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),(</span><span class="s1">&#39;ORLOV&#39;</span><span class="p">,</span><span class="mf">1.</span><span class="p">)]</span> <span class="p">,</span> <span class="p">(</span><span class="s1">&#39;TG&#39;</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)]</span> <span class="n">here</span> <span class="n">an</span> <span class="n">impuls</span> <span class="ow">is</span> <span class="n">given</span> <span class="k">for</span> <span class="n">each</span> <span class="n">variable</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">first</span> <span class="n">instrument</span> <span class="n">consiste</span> <span class="n">of</span> <span class="n">two</span> <span class="n">variables</span>
</pre></div>
</div>
<p><strong>Targets</strong> are list of variables</p>
<p>Convergence is achieved when all targets are within convergens distance from the target value</p>
<p>Convergencedistance can be set individual for a target variable by setting a value in &lt;modelinstance&gt;.targetconv</p>
<p>Targets and target values are provided by a dataframe.</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelinvert.targets_instruments.jacobi">
<span class="sig-name descname"><span class="pre">jacobi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">per</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelinvert.html#targets_instruments.jacobi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelinvert.targets_instruments.jacobi" title="Permalink to this definition"></a></dt>
<dd><p>Calculates a jecobi matrix of derivatives based on the instruments and targets</p>
<p>returns a dataframe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelinvert.targets_instruments.invjacobi">
<span class="sig-name descname"><span class="pre">invjacobi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">per</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelinvert.html#targets_instruments.invjacobi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelinvert.targets_instruments.invjacobi" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the inverted jacobi matrix</p>
<p>returns a dataframe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelinvert.targets_instruments.targetseek">
<span class="sig-name descname"><span class="pre">targetseek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">databank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shortfall</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ti_damp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progressbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelinvert.html#targets_instruments.targetseek"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelinvert.targets_instruments.targetseek" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the instruments as a function of targets</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="enriching-pandas-dataframes">
<h1>Enriching Pandas DataFrames<a class="headerlink" href="#enriching-pandas-dataframes" title="Permalink to this headline"></a></h1>
<p>Pandas dataframes can be enriched and this is done in two instances.
- to make it convinient to update variables
- to embed modelflow into dataframes</p>
<div class="section" id="when-modelclass-is-imported-upd-is-embedded">
<h2>When modelclass is imported upd is embedded<a class="headerlink" href="#when-modelclass-is-imported-upd-is-embedded" title="Permalink to this headline"></a></h2>
<p>dataframes are equiped with the upd method. This allows convinient
updating of variables using the <a class="reference internal" href="Core.html#modelclass.Model_help_Mixin.update" title="modelclass.Model_help_Mixin.update"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">update</span></code></a> method.</p>
</div>
<div class="section" id="module-modelmf">
<span id="when-modelmf-is-imported-modelflow-is-imbedded-dataframes"></span><h2>When modelmf is imported, modelflow is imbedded dataframes<a class="headerlink" href="#module-modelmf" title="Permalink to this headline"></a></h2>
<p>This is a module for extending pandas dataframes with the modelflow toolbox</p>
<p>Created on Sat March 2019</p>
<p>&#64;author: hanseni</p>
<dl class="py class">
<dt class="sig sig-object py" id="modelmf.mf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelmf.</span></span><span class="sig-name descname"><span class="pre">mf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pandas_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf" title="Permalink to this definition"></a></dt>
<dd><p>A class to extend Pandas Dataframes with ModelFlow functionalities</p>
<p>Not to be used on its own</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mf.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf.copy" title="Permalink to this definition"></a></dt>
<dd><p>copy a modelflow extended dataframe, so it remember its model and options</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mf.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf.solve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf.solve" title="Permalink to this definition"></a></dt>
<dd><p>Solves a model</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mf.makemodel">
<span class="sig-name descname"><span class="pre">makemodel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eq</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf.makemodel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf.makemodel" title="Permalink to this definition"></a></dt>
<dd><p>Makes a model from equations</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mf.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf.__call__" title="Permalink to this definition"></a></dt>
<dd><p>returns a model instace</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eq</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>**kwargs</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a instance .</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="Core.html#modelclass.model" title="modelclass.model">model</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mf.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mf.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mf.__getitem__" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves  __getitem__ from model instance</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelmf.mfcalc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelmf.</span></span><span class="sig-name descname"><span class="pre">mfcalc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pandas_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mfcalc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mfcalc" title="Permalink to this definition"></a></dt>
<dd><p>Used to carry out calculation specified as equations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eq</strong> (<em>TYPE</em>) – Equations one on each line. can be started with &lt;start end&gt; to control calculation sample .</p></li>
<li><p><strong>start</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>slut</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>showeq</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – If True the equations will be printed. Defaults to False.</p></li>
<li><p><strong>**kwargs</strong> (<em>TYPE</em>) – Here all solve options can be provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mfcalc.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showeq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mfcalc.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mfcalc.__call__" title="Permalink to this definition"></a></dt>
<dd><p>This call performs the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eq</strong> (<em>TYPE</em>) – Equations one on each line. can be started with &lt;start end&gt; to control calculation sample .</p></li>
<li><p><strong>start</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>slut</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘’.</p></li>
<li><p><strong>showeq</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – If True the equations will be printed. Defaults to False.</p></li>
<li><p><strong>**kwargs</strong> (<em>TYPE</em>) – Here all solve options can be provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataframe.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelmf.mfupdate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelmf.</span></span><span class="sig-name descname"><span class="pre">mfupdate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pandas_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mfupdate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mfupdate" title="Permalink to this definition"></a></dt>
<dd><p>Extend a dataframe to update with values from another dataframe</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelmf.mfupdate.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#mfupdate.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.mfupdate.__call__" title="Permalink to this definition"></a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelmf.ibloc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelmf.</span></span><span class="sig-name descname"><span class="pre">ibloc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pandas_obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#ibloc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.ibloc" title="Permalink to this definition"></a></dt>
<dd><p>Extend a dataframe with a slice method which accepot wildcards in column selection.</p>
<p>The method just juse the method vlist from modelclass.model class</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelmf.ibloc.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelmf.html#ibloc.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelmf.ibloc.__call__" title="Permalink to this definition"></a></dt>
<dd><p>Not in use</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="logical-structure">
<h1>Logical Structure<a class="headerlink" href="#logical-structure" title="Permalink to this headline"></a></h1>
<div class="section" id="module-modelnet">
<span id="modelnet"></span><h2>modelnet<a class="headerlink" href="#module-modelnet" title="Permalink to this headline"></a></h2>
<p>Created on Wed Oct 15 14:30:44 2014</p>
<p>Displays an adjencacy matrix
.
&#64;author: ibh</p>
<dl class="py function">
<dt class="sig sig-object py" id="modelnet.draw_adjacency_matrix">
<span class="sig-prename descclassname"><span class="pre">modelnet.</span></span><span class="sig-name descname"><span class="pre">draw_adjacency_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">G</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Structure'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(10,</span> <span class="pre">10)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnet.html#draw_adjacency_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnet.draw_adjacency_matrix" title="Permalink to this definition"></a></dt>
<dd><ul class="simple">
<li><p>G is a netorkx graph</p></li>
<li><dl class="simple">
<dt>node_order (optional) is a list of nodes, where each node in G</dt><dd><p>appears exactly once</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>partitions is a list of node lists, where each node in G appears</dt><dd><p>in exactly one node list</p>
</dd>
</dl>
</li>
<li><p>type is a list of saying “simultaneous” or something else, has to have same length as partitions</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modelnet.drawendoexo">
<span class="sig-prename descclassname"><span class="pre">modelnet.</span></span><span class="sig-name descname"><span class="pre">drawendoexo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6.0,</span> <span class="pre">6.0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelnet.html#drawendoexo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelnet.drawendoexo" title="Permalink to this definition"></a></dt>
<dd><p>Draw dependency including exogeneous. Used for illustrating for small models</p>
</dd></dl>

</div>
</div>
<div class="section" id="jupyter-stuff">
<h1>Jupyter Stuff<a class="headerlink" href="#jupyter-stuff" title="Permalink to this headline"></a></h1>
<div class="section" id="module-modelwidget">
<span id="update-widgets"></span><h2>update widgets<a class="headerlink" href="#module-modelwidget" title="Permalink to this headline"></a></h2>
<p>Created on Mon Aug  9 14:46:11 2021</p>
<p>To define Jupyter widgets to update and show variables.
&#64;author: Ib</p>
<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.basewidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">basewidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datachildren:</span> <span class="pre">list</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#basewidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.basewidget" title="Permalink to this definition"></a></dt>
<dd><p>basis for widget updating in jupyter</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.basewidget.update_df">
<span class="sig-name descname"><span class="pre">update_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_per</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#basewidget.update_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.basewidget.update_df" title="Permalink to this definition"></a></dt>
<dd><p>will update container widgets</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.tabwidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">tabwidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tabdefdict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tab</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selected_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#tabwidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.tabwidget" title="Permalink to this definition"></a></dt>
<dd><p>A widget to create tab or acordium contaners</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.tabwidget.update_df">
<span class="sig-name descname"><span class="pre">update_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_per</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#tabwidget.update_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.tabwidget.update_df" title="Permalink to this definition"></a></dt>
<dd><p>will update container widgets</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.tabwidget.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#tabwidget.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.tabwidget.reset" title="Permalink to this definition"></a></dt>
<dd><p>will reset  container widgets</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.sheetwidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">sheetwidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_var:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trans:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">sheetwidget.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expname:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'Carbon</span> <span class="pre">tax</span> <span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">US$</span> <span class="pre">per</span> <span class="pre">tonn</span> <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#sheetwidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.sheetwidget" title="Permalink to this definition"></a></dt>
<dd><p>class defining a widget which updates from a sheet</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.slidewidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">slidewidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slidedef</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">altname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Alternative'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Baseline'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Carbon</span> <span class="pre">tax</span> <span class="pre">rate,</span> <span class="pre">US$</span> <span class="pre">per</span> <span class="pre">tonn</span> <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#slidewidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.slidewidget" title="Permalink to this definition"></a></dt>
<dd><p>class defefining a widget with lines of slides</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.slidewidget.update_df">
<span class="sig-name descname"><span class="pre">update_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_per</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#slidewidget.update_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.slidewidget.update_df" title="Permalink to this definition"></a></dt>
<dd><p>updates a dataframe with the values from the widget</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.slidewidget.set_slide_value">
<span class="sig-name descname"><span class="pre">set_slide_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#slidewidget.set_slide_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.slidewidget.set_slide_value" title="Permalink to this definition"></a></dt>
<dd><p>updates the new values to the self.current_vlues
will be used in update_df</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.sumslidewidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">sumslidewidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slidedef</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">altname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Alternative'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Baseline'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Carbon</span> <span class="pre">tax</span> <span class="pre">rate,</span> <span class="pre">US$</span> <span class="pre">per</span> <span class="pre">tonn</span> <span class="pre">'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#sumslidewidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.sumslidewidget" title="Permalink to this definition"></a></dt>
<dd><p>class defefining a widget with lines of slides</p>
<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.sumslidewidget.update_df">
<span class="sig-name descname"><span class="pre">update_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_per</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#sumslidewidget.update_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.sumslidewidget.update_df" title="Permalink to this definition"></a></dt>
<dd><p>updates a dataframe with the values from the widget</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="modelwidget.sumslidewidget.set_slide_value">
<span class="sig-name descname"><span class="pre">set_slide_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#sumslidewidget.set_slide_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.sumslidewidget.set_slide_value" title="Permalink to this definition"></a></dt>
<dd><p>updates the new values to the self.current_vlues
will be used in update_df</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.updatewidget">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">updatewidget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmodel:</span> <span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a_datawidget:</span> <span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basename:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'Business</span> <span class="pre">as</span> <span class="pre">usual'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keeppat:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varpat:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showvarpat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exodif:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lwrun:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lwupdate:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lwreset:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lwsetbas:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lwshow:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputwidget:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'jupviz'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_dict:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_first:</span> <span class="pre">typing.Optional[any]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vline:</span> <span class="pre">list</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relativ_start:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">short:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#updatewidget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.updatewidget" title="Permalink to this definition"></a></dt>
<dd><p>class to input and run a model</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.htmlwidget_df">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">htmlwidget_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmodel:</span> <span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_var:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trans:</span> <span class="pre">any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">htmlwidget_df.&lt;lambda&gt;&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expname:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#htmlwidget_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.htmlwidget_df" title="Permalink to this definition"></a></dt>
<dd><p>class displays a dataframe in a html widget</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.htmlwidget_fig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">htmlwidget_fig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">figs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'svg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#htmlwidget_fig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.htmlwidget_fig" title="Permalink to this definition"></a></dt>
<dd><p>class displays a dataframe in a html widget</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.htmlwidget_label">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">htmlwidget_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'svg'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#htmlwidget_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.htmlwidget_label" title="Permalink to this definition"></a></dt>
<dd><p>class displays a dataframe in a html widget</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="modelwidget.visshow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">modelwidget.</span></span><span class="sig-name descname"><span class="pre">visshow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmodel:</span> <span class="pre">&lt;built-in</span> <span class="pre">function</span> <span class="pre">any&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varpat:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showvarpat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_on:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modelwidget.html#visshow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modelwidget.visshow" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-modeljupytermagic">
<span id="modeljupytermagic-defines-magic-functions-to-define-models-data-and-graphs-in-jupyter-cells"></span><h2>modeljupytermagic, Defines magic functions to define models, data and graphs in jupyter cells<a class="headerlink" href="#module-modeljupytermagic" title="Permalink to this headline"></a></h2>
<p>This module defines several magic jupyter functions:</p>
<dl class="field-list simple">
<dt class="field-odd">graphviz</dt>
<dd class="field-odd"><p>Draw Graphviz graph</p>
</dd>
<dt class="field-even">dataframe</dt>
<dd class="field-even"><p>Create Pandas Dataframe</p>
</dd>
<dt class="field-odd">latexflow</dt>
<dd class="field-odd"><p>Create a modelflow modelinstance from latex script</p>
</dd>
</dl>
<p>To display the doc strings use the functions in jupyter.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modeljupytermagic.get_options">
<span class="sig-prename descclassname"><span class="pre">modeljupytermagic.</span></span><span class="sig-name descname"><span class="pre">get_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaultname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/modeljupytermagic.html#get_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#modeljupytermagic.get_options" title="Permalink to this definition"></a></dt>
<dd><p>Retrives options from the first line</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line</strong> (<em>TYPE</em>) – DESCRIPTION.</p></li>
<li><p><strong>defaultname</strong> (<em>TYPE</em><em>, </em><em>optional</em>) – DESCRIPTION. Defaults to ‘test’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name .
opt (dict): options.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>name (string)</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="optimizaton">
<h1>Optimizaton<a class="headerlink" href="#optimizaton" title="Permalink to this headline"></a></h1>
<div class="section" id="module-model_cvx">
<span id="model-cvx"></span><h2>model_cvx<a class="headerlink" href="#module-model_cvx" title="Permalink to this headline"></a></h2>
<p>Created on Mon May 26 21:11:18 2014</p>
<p>&#64;author: Ib Hansen</p>
<p>A good explanation of quadradic programming in cvxopt is in
<a class="reference external" href="http://courses.csail.mit.edu/6.867/wiki/images/a/a7/Qp-cvxopt.pdf">http://courses.csail.mit.edu/6.867/wiki/images/a/a7/Qp-cvxopt.pdf</a></p>
<p>This exampel calculates the efficient forntier in a small example
the example is based on a mean variance model for Indonesian Rupia running in Excel</p>
<dl class="py function">
<dt class="sig sig-object py" id="model_cvx.mv_opt">
<span class="sig-prename descclassname"><span class="pre">model_cvx.</span></span><span class="sig-name descname"><span class="pre">mv_opt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">PP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">riskaversion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bsum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weigthtedsum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lprint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solget</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_cvx.html#mv_opt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_cvx.mv_opt" title="Permalink to this definition"></a></dt>
<dd><p>Performs mean variance optimization by calling a quadratic optimization function from the cvxopt</p>
<p>library</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_cvx.mv_opt_bs">
<span class="sig-prename descclassname"><span class="pre">model_cvx.</span></span><span class="sig-name descname"><span class="pre">mv_opt_bs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msigma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vreturn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">riskaversion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">budget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capital</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lcr_weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lcr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leverage_weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lprint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solget</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_cvx.html#mv_opt_bs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_cvx.mv_opt_bs" title="Permalink to this definition"></a></dt>
<dd><p>performs balance sheet optimization</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="model_cvx.mv_opt_prop">
<span class="sig-prename descclassname"><span class="pre">model_cvx.</span></span><span class="sig-name descname"><span class="pre">mv_opt_prop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">PP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">riskaversion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bsum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weigthtedsum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundsmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lprint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/model_cvx.html#mv_opt_prop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#model_cvx.mv_opt_prop" title="Permalink to this definition"></a></dt>
<dd><p>select a numner of assets/liabilities which. when the selection is feasible an Mean variance optimazation is performed</p>
<p>the selection is based on probabilities</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Introduction.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Ib Hansen.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>